



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for Islandora Enterprise (ISLE)">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0, mkdocs-material-3.0.3">
    
    
      
        <title>Data persistence - Islandora Enterprise (ISLE)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#data-persistence-in-docker" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Islandora Enterprise (ISLE)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Islandora Enterprise (ISLE)
              </span>
              <span class="md-header-nav__topic">
                Data persistence
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Islandora Enterprise (ISLE)" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Islandora Enterprise (ISLE)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/about-isle/" title="About isle" class="md-nav__link">
      About isle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/committers/" title="Committers" class="md-nav__link">
      Committers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/get-help/" title="Getting Help with ISLE" class="md-nav__link">
      Getting Help with ISLE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Appendices
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Appendices
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../configuring-lets-encrypt/" title="Configuring lets encrypt" class="md-nav__link">
      Configuring lets encrypt
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Data persistence
      </label>
    
    <a href="./" title="Data persistence" class="md-nav__link md-nav__link--active">
      Data persistence
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bind-mounts-vs-volumes" title="Bind mounts vs volumes:" class="md-nav__link">
    Bind mounts vs volumes:
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volumes" title="Volumes" class="md-nav__link">
    Volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind-mounts" title="Bind Mounts" class="md-nav__link">
    Bind Mounts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-should-be-persisted-this-way" title="What should be persisted this way?" class="md-nav__link">
    What should be persisted this way?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-should-not-be-persisted" title="What should NOT be persisted?" class="md-nav__link">
    What should NOT be persisted?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#which-should-i-use-bind-mounts-or-volumes" title="Which should I use, bind mounts or volumes?" class="md-nav__link">
    Which should I use, bind mounts or volumes?
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../environment-files/" title="Environment files" class="md-nav__link">
      Environment files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-troubleshooting/" title="Install troubleshooting" class="md-nav__link">
      Install troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installing-module-with-composer/" title="Installing module with composer" class="md-nav__link">
      Installing module with composer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installing-module-with-drush/" title="Installing module with drush" class="md-nav__link">
      Installing module with drush
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../open-terminal-in-running-container/" title="Open terminal in running container" class="md-nav__link">
      Open terminal in running container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../redhat/" title="Redhat" class="md-nav__link">
      Redhat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sample-it-department-request/" title="Sample it department request" class="md-nav__link">
      Sample it department request
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-story-demo-site/" title="User story demo site" class="md-nav__link">
      User story demo site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-story-migration-site/" title="User Story: Migrating an Islandora Site to ISLE" class="md-nav__link">
      User Story: Migrating an Islandora Site to ISLE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-story-new-site/" title="User Story: Building a New Islandora Site Using ISLE" class="md-nav__link">
      User Story: Building a New Islandora Site Using ISLE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Contributor docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Contributor docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/ansible-guide/" title="Ansible guide" class="md-nav__link">
      Ansible guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/build-guide-v111/" title="ISLE Build Process" class="md-nav__link">
      ISLE Build Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/build-guide/" title="Build guide" class="md-nav__link">
      Build guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/editing-local/" title="Editing local" class="md-nav__link">
      Editing local
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/editing-online/" title="Editing online" class="md-nav__link">
      Editing online
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/mkdocs/" title="Documentation: MkDocs" class="md-nav__link">
      Documentation: MkDocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/policies/" title="Policies" class="md-nav__link">
      Policies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/release-process/" title="Release process" class="md-nav__link">
      Release process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/spell-checker/" title="How to Spell-Check the Documentation" class="md-nav__link">
      How to Spell-Check the Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/style-guide/" title="ISLE Documentation: Style Guide" class="md-nav__link">
      ISLE Documentation: Style Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributor-docs/testing-guide/" title="Testing guide" class="md-nav__link">
      Testing guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Cookbook recipes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Cookbook recipes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook-recipes/isle-cheatsheet-docker-commands/" title="Isle cheatsheet docker commands" class="md-nav__link">
      Isle cheatsheet docker commands
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Install
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Install
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/host-hardware-requirements/" title="Hardware Requirements" class="md-nav__link">
      Hardware Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/host-software-dependencies/" title="Software Dependencies" class="md-nav__link">
      Software Dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-demo-edit-hosts-file/" title="Demo ISLE Installation: Edit the "/etc/hosts" File" class="md-nav__link">
      Demo ISLE Installation: Edit the "/etc/hosts" File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-demo-resources/" title="Demo ISLE Installation: Resources" class="md-nav__link">
      Demo ISLE Installation: Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-demo-troubleshooting/" title="Demo ISLE Installation: Troubleshooting" class="md-nav__link">
      Demo ISLE Installation: Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-demo/" title="Demo ISLE Installation" class="md-nav__link">
      Demo ISLE Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/install-server/" title="Remote Server ISLE Installation" class="md-nav__link">
      Remote Server ISLE Installation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Migrate
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Migrate
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../migrate/export-checklist/" title="Migration Export Checklist" class="md-nav__link">
      Migration Export Checklist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../migrate/install-migration/" title="Migrate to ISLE Environment" class="md-nav__link">
      Migrate to ISLE Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../migrate/merge-checklist/" title="Migration Merge Checklist" class="md-nav__link">
      Migration Merge Checklist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../migrate/reindex-process/" title="Migration Reindex Process" class="md-nav__link">
      Migration Reindex Process
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Release notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Release notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release-1-1/" title="ISLE Release 1.1 (Codenamed `Pembroke`)" class="md-nav__link">
      ISLE Release 1.1 (Codenamed `Pembroke`)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/release/" title="Release Notes - ISLE v.1.1.1, 2019-05-01" class="md-nav__link">
      Release Notes - ISLE v.1.1.1, 2019-05-01
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Specifications
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Specifications
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../specifications/diagram-network/" title="Diagram network" class="md-nav__link">
      Diagram network
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../specifications/docker-containers-images/" title="Docker containers images" class="md-nav__link">
      Docker containers images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../specifications/dockerfiles/" title="Dockerfiles" class="md-nav__link">
      Dockerfiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../specifications/supported-drupal-modules-matrix/" title="Supported drupal modules matrix" class="md-nav__link">
      Supported drupal modules matrix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../specifications/supported-software-matrix/" title="Supported software matrix" class="md-nav__link">
      Supported software matrix
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Update
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Update
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../update/update/" title="Update ISLE" class="md-nav__link">
      Update ISLE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bind-mounts-vs-volumes" title="Bind mounts vs volumes:" class="md-nav__link">
    Bind mounts vs volumes:
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volumes" title="Volumes" class="md-nav__link">
    Volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind-mounts" title="Bind Mounts" class="md-nav__link">
    Bind Mounts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-should-be-persisted-this-way" title="What should be persisted this way?" class="md-nav__link">
    What should be persisted this way?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-should-not-be-persisted" title="What should NOT be persisted?" class="md-nav__link">
    What should NOT be persisted?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#which-should-i-use-bind-mounts-or-volumes" title="Which should I use, bind mounts or volumes?" class="md-nav__link">
    Which should I use, bind mounts or volumes?
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <!--- PAGE_TITLE --->

<h1 id="data-persistence-in-docker">Data Persistence in Docker</h1>
<p><strong>Please note this is a simplified explanation of how Docker stores data in relation to a typical ISLE installation. This document assumes the use of the docker-compose command and docker-compose.yml, though there are other ways to specify how docker uses volumes and bind mounts.  For more complete descriptions of bind mounts and volumes, and their management, please see the official docker documentation.</strong></p>
<p><strong>Data</strong>, in this context, can include digital objects, files, logs, code, or information stored in mysql, solr, or fedora.  Essentially, anything typically written to or read from disk in some format, is data. </p>
<p>By default, each time a docker container is brought up using a command like <code>docker-compose up -d</code> the container is recreated using the base container image. When a process in the container creates or changes a file (for example, an apache log file) those changes only exist while the container is running.  If the container is brought down and back up again, it is recreated using the base image, which will not include the apache log. In order to preserve certain data--for example, the Fedora datastore, Drupal’s database and files, etc, ISLE uses volumes and/or bind mounts defined in 'docker-compose.yml'.  </p>
<p>Data written to volumes and bind mounts are different to other data in Docker in two important ways: </p>
<ul>
<li>It is persistent, so it will survive when there is an update to the base ISLE docker images</li>
<li>It can be read and written from the host easily and safely</li>
</ul>
<h2 id="bind-mounts-vs-volumes">Bind mounts vs volumes:</h2>
<p>Docker provides two different ways to persist data: <strong>Volumes</strong> and <strong>bind mounts</strong>, described below.  For simplicity, in this document, <strong>persisted</strong> refers to any data or directory stored in either a bind mount or volume.</p>
<h3 id="volumes">Volumes</h3>
<p>Volumes can be named in the docker-compose.yml file and are managed by docker.  In the host system, the directories will be created in the Docker store (on Linux, usually /var/lib/docker).  If the volume does not already exist, it will be created on docker-compose up.</p>
<p>Below is an example docker-compose.yml directive for an apache container using a volume:</p>
<pre><code>volumes:
apache-data:/var/www/html
</code></pre>
<p>Explanation: If not already created, docker will create a directory on the host at '/var/lib/docker' and use that for the apache container’s '/var/www/html' directory.</p>
<h3 id="bind-mounts">Bind Mounts</h3>
<p>Bind mounts map a directory in the container to a directory anywhere on the host and are not managed directly by docker.  </p>
<p>Below is an example 'docker-compose.yml' directive for an apache container using a bind mount:</p>
<pre><code>volumes:
/opt/ISLE/apache/html:/var/www/html
</code></pre>
<p>Explanation:  Data in the host’s /opt/ISLE/apache/html directory will be in the apache container’s /var/www/html.  If the directory does not exist on the host, it will NOT be created on <code>docker-compose up -d</code>, so be sure to create any necessary directories on the host manually.  </p>
<p>If the container’s '/var/www/html/' directory has content, it will be masked by the contents of the host’s '/opt/ISLE/apache/html/' directory.</p>
<h2 id="what-should-be-persisted-this-way">What should be persisted this way?</h2>
<p>Data and directories that store data unique to your Islandora, such as the Fedora datastore, Solr index, and the full Drupal directory, should be persisted, as should the mysql data directories and some configuration files (those not generated via the .env files).  This will ensure that your customizations and content remain even after ISLE containers are updated.</p>
<p>It may be useful to write logs to a persisted directory to make accessing and managing the logs easier, and to provide sufficient capacity for log storage.  </p>
<p>If your workflows involve moving digital objects onto the Islandora server for local ingest, it may be useful to have a persisted directory designated for those objects.  The alternative is to put them on the host server, then use <code>scp</code> or <code>docker cp</code> to copy them into the container, which adds steps to the process.</p>
<h2 id="what-should-not-be-persisted">What should NOT be persisted?</h2>
<p>Application data that is not meant to be customized or unique to your institution should not be persisted, but instead managed within the docker container (as it is by default).   Example:  The ISLE team updates the apache container to apache2’s latest security release.  If the directory containing apache’s binary is in a persisted directory, then updating ISLE will NOT automatically provide the latest apache, and you will continue to run the older, insecure apache until you manually update it inside the container.  This negates many of the benefits of using ISLE.  </p>
<h2 id="which-should-i-use-bind-mounts-or-volumes">Which should I use, bind mounts or volumes?</h2>
<p>The answer for this is “it depends”.   Bind mounts may be easier to get to on a host machine as you have more control over where they are.  If you are migrating an existing installation, you will almost certainly want to copy over things like your /var/www/html directory and Fedora store and use a bind mount to point to them.  The solr index, however, should not be migrated over but rather rebuilt.  It doesn’t need to exist before the containers do. It is also unlikely that a user would want to navigate to the solr directory via command line on the host and edit files directly.  A named volume would probably work fine in this case, and be more easily managed by docker. </p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../configuring-lets-encrypt/" title="Configuring lets encrypt" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Configuring lets encrypt
              </span>
            </div>
          </a>
        
        
          <a href="../environment-files/" title="Environment files" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Environment files
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0",url:{base:"../.."}})</script>
      
        <script src="../../extra.js"></script>
      
    
    
      
    
  </body>
</html>