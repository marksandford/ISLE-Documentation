



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for Islandora Enterprise (ISLE)">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0, mkdocs-material-3.0.3">
    
    
      
        <title>New Site Installation Guide - w/ multiple ISLE Environments - Islandora Enterprise (ISLE)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#index-of-related-documents" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Islandora Enterprise (ISLE)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Islandora Enterprise (ISLE)
              </span>
              <span class="md-header-nav__topic">
                New Site Installation Guide - w/ multiple ISLE Environments
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Islandora Enterprise (ISLE)" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Islandora Enterprise (ISLE)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Installation and Migration Instructions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Installation and Migration Instructions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      1. Set up the Host Server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        1. Set up the Host Server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/install_on_centos/" title="CentOS 7.x" class="md-nav__link">
      CentOS 7.x
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/install_on_ubuntu_1804/" title="Ubuntu 18.04" class="md-nav__link">
      Ubuntu 18.04
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/install_docker_for_mac/" title="Docker for Mac Hig Sierra" class="md-nav__link">
      Docker for Mac Hig Sierra
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/install_docker_for_windows/" title="Docker for Windows 10" class="md-nav__link">
      Docker for Windows 10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/install_macos_vagrant/" title="Vagrant & VirtualBox on MacOS (Deprecated)" class="md-nav__link">
      Vagrant & VirtualBox on MacOS (Deprecated)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/install_troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2" checked>
    
    <label class="md-nav__link" for="nav-2-2">
      2. Install ISLE
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        2. Install ISLE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2-1" type="checkbox" id="nav-2-2-1">
    
    <label class="md-nav__link" for="nav-2-2-1">
      Install a Test Site
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-1">
        Install a Test Site
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_installation_test/ild_example_user_story/" title="Test Site Example User Story" class="md-nav__link">
      Test Site Example User Story
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_installation_test/ild_installation_guide/" title="Test Site Installation Guide" class="md-nav__link">
      Test Site Installation Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_installation_test/ild_resources/" title="Test Site Resources" class="md-nav__link">
      Test Site Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2-2" type="checkbox" id="nav-2-2-2" checked>
    
    <label class="md-nav__link" for="nav-2-2-2">
      Install a New ISLE Site
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-2">
        Install a New ISLE Site
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../new_site_example_user_story/" title="New Site Example User Story" class="md-nav__link">
      New Site Example User Story
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../new_site_installation_guide_single/" title="New Site Installation Guide - w/ Single ISLE Environment" class="md-nav__link">
      New Site Installation Guide - w/ Single ISLE Environment
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        New Site Installation Guide - w/ multiple ISLE Environments
      </label>
    
    <a href="./" title="New Site Installation Guide - w/ multiple ISLE Environments" class="md-nav__link md-nav__link--active">
      New Site Installation Guide - w/ multiple ISLE Environments
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index-of-related-documents" title="Index of related documents" class="md-nav__link">
    Index of related documents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assumptions-prerequisites" title="Assumptions / Prerequisites" class="md-nav__link">
    Assumptions / Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-isle-islandora-environments" title="Multiple ISLE / Islandora Environments" class="md-nav__link">
    Multiple ISLE / Islandora Environments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-private-code-repository" title="Create Private Code Repository" class="md-nav__link">
    Create Private Code Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edits" title="Edits" class="md-nav__link">
    Edits
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-compose-file" title="Docker compose file:" class="md-nav__link">
    Docker compose file:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-directories" title="Config directories" class="md-nav__link">
    Config directories
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apache-directory" title="Apache directory" class="md-nav__link">
    Apache directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apache-sites-enabled" title="Apache - sites-enabled" class="md-nav__link">
    Apache - sites-enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apache-ssl-certs" title="Apache - ssl-certs" class="md-nav__link">
    Apache - ssl-certs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apache-ssl-certs-multi" title="Apache - ssl-certs (multi)" class="md-nav__link">
    Apache - ssl-certs (multi)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apache-tmpreaper" title="Apache - tmpreaper" class="md-nav__link">
    Apache - tmpreaper
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fedora-directory" title="Fedora directory" class="md-nav__link">
    Fedora directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fedora-fedora" title="Fedora - fedora" class="md-nav__link">
    Fedora - fedora
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fedora-gsearch" title="Fedora - gsearch" class="md-nav__link">
    Fedora - gsearch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fedora-tmpreaper" title="Fedora - tmpreaper" class="md-nav__link">
    Fedora - tmpreaper
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fedora-tomcat" title="Fedora - tomcat" class="md-nav__link">
    Fedora - tomcat
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mysql-directory" title="Mysql directory" class="md-nav__link">
    Mysql directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mysql-initscripts" title="Mysql - initscripts" class="md-nav__link">
    Mysql - initscripts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-directory" title="Proxy directory" class="md-nav__link">
    Proxy directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proxy-sites-enabled" title="Proxy - sites-enabled" class="md-nav__link">
    Proxy - sites-enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-sites-enabled-multi" title="Proxy - sites-enabled (multi)" class="md-nav__link">
    Proxy - sites-enabled (multi)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-ssl-certs" title="Proxy - ssl-certs" class="md-nav__link">
    Proxy - ssl-certs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-ssl-certs-multi" title="Proxy - ssl-certs (multi)" class="md-nav__link">
    Proxy - ssl-certs (multi)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-upstreamsd" title="Proxy - upstreams.d" class="md-nav__link">
    Proxy - upstreams.d
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-upstreamsd-multi" title="Proxy - upstreams.d (multi)" class="md-nav__link">
    Proxy - upstreams.d (multi)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-docker-composeyml-only-multi" title="Proxy - docker-compose.yml (only multi)" class="md-nav__link">
    Proxy - docker-compose.yml (only multi)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solr-directory" title="Solr directory" class="md-nav__link">
    Solr directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solr-solr" title="Solr - solr" class="md-nav__link">
    Solr - solr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solr-tomcat" title="Solr - tomcat" class="md-nav__link">
    Solr - tomcat
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-steps" title="Final steps" class="md-nav__link">
    Final steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clone-custom-configuration-to-host-server" title="Clone Custom Configuration to Host Server" class="md-nav__link">
    Clone Custom Configuration to Host Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spin-up-isle-containers" title="Spin up ISLE containers!" class="md-nav__link">
    Spin up ISLE containers!
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2-3" type="checkbox" id="nav-2-2-3">
    
    <label class="md-nav__link" for="nav-2-2-3">
      Migrate an Existing Islandora site to ISLE
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-3">
        Migrate an Existing Islandora site to ISLE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_installation_migration/migration_example_user_story/" title="Migration Example User Story" class="md-nav__link">
      Migration Example User Story
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_installation_migration/migration_installation_guide/" title="Migration Guide" class="md-nav__link">
      Migration Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_installation_migration/migration_export_checklist/" title="Migration Export Checklist" class="md-nav__link">
      Migration Export Checklist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_installation_migration/migration_merge_checklist/" title="Migration Merge Checklist" class="md-nav__link">
      Migration Merge Checklist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_installation_migration/migration_reindex_process/" title="Migration Reindex Process" class="md-nav__link">
      Migration Reindex Process
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../get_help/" title="Get Help" class="md-nav__link">
      Get Help
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Developer Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Developer Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_documentation_overview/" title="Documentation Overview" class="md-nav__link">
      Documentation Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_documentation_editing_online/" title="Documentation Editing - Online" class="md-nav__link">
      Documentation Editing - Online
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_documentation_editing_local/" title="Documentation Editing - Local" class="md-nav__link">
      Documentation Editing - Local
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_documentation_mkdocs/" title="Installing Mkdocs" class="md-nav__link">
      Installing Mkdocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_release_process/" title="Release process" class="md-nav__link">
      Release process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_example_user_story/" title="Example User Story" class="md-nav__link">
      Example User Story
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_build_guide/" title="Build Guide" class="md-nav__link">
      Build Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_testing_guide/" title="Testing Guide" class="md-nav__link">
      Testing Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../05_developer_docs/dev_ansible_guide/" title="Ansible Guide" class="md-nav__link">
      Ansible Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Specifications
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Specifications
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../06_specifications/specs_dockerfiles/" title="Dockerfiles" class="md-nav__link">
      Dockerfiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../06_specifications/specs_docker_containers_images/" title="Docker Containers & Images" class="md-nav__link">
      Docker Containers & Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../06_specifications/specs_diagram_network/" title="Diagram of network and connections" class="md-nav__link">
      Diagram of network and connections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../06_specifications/specs_supported_software_matrix/" title="Supported ISLE Software Matrix" class="md-nav__link">
      Supported ISLE Software Matrix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../06_specifications/specs_supported_drupal_modules_matrix/" title="Supported Drupal Modules on Test Site Matrix" class="md-nav__link">
      Supported Drupal Modules on Test Site Matrix
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Appendices
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Appendices
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../01_installation_host_server/host_server_system_specifications/" title="Host Server Specifications" class="md-nav__link">
      Host Server Specifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../update_isle.md" title="Updating ISLE" class="md-nav__link">
      Updating ISLE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../07_appendices/editing-the-hosts-file/" title="Editing the /ect/hosts file" class="md-nav__link">
      Editing the /ect/hosts file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../07_appendices/sample-it-department-request/" title="Sample IT Department Request Letter" class="md-nav__link">
      Sample IT Department Request Letter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../07_appendices/installing-module-with-composer/" title="Installing a Drupal Module with Composer" class="md-nav__link">
      Installing a Drupal Module with Composer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../07_appendices/installing-module-with-drush/" title="Installing a Drupal Module with Drush" class="md-nav__link">
      Installing a Drupal Module with Drush
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../07_appendices/open-terminal-in-running-container/" title="Opening a Terminal in a Running Container" class="md-nav__link">
      Opening a Terminal in a Running Container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../07_appendices/redhat/" title="Note/Warning about installing on Redhat" class="md-nav__link">
      Note/Warning about installing on Redhat
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../08_about/about/" title="About ISLE" class="md-nav__link">
      About ISLE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../08_about/contributing_to_project/" title="Contributing to Project" class="md-nav__link">
      Contributing to Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../08_about/dbout_maintainers.md" title="About Maintainers" class="md-nav__link">
      About Maintainers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../08_about/policies.md" title="Policies" class="md-nav__link">
      Policies
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../09_release_notes/release_notes/" title="Release Notes" class="md-nav__link">
      Release Notes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../glossary/" title="Glossary of Terms and Variables" class="md-nav__link">
      Glossary of Terms and Variables
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index-of-related-documents" title="Index of related documents" class="md-nav__link">
    Index of related documents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assumptions-prerequisites" title="Assumptions / Prerequisites" class="md-nav__link">
    Assumptions / Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-isle-islandora-environments" title="Multiple ISLE / Islandora Environments" class="md-nav__link">
    Multiple ISLE / Islandora Environments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-private-code-repository" title="Create Private Code Repository" class="md-nav__link">
    Create Private Code Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edits" title="Edits" class="md-nav__link">
    Edits
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-compose-file" title="Docker compose file:" class="md-nav__link">
    Docker compose file:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-directories" title="Config directories" class="md-nav__link">
    Config directories
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apache-directory" title="Apache directory" class="md-nav__link">
    Apache directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apache-sites-enabled" title="Apache - sites-enabled" class="md-nav__link">
    Apache - sites-enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apache-ssl-certs" title="Apache - ssl-certs" class="md-nav__link">
    Apache - ssl-certs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apache-ssl-certs-multi" title="Apache - ssl-certs (multi)" class="md-nav__link">
    Apache - ssl-certs (multi)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apache-tmpreaper" title="Apache - tmpreaper" class="md-nav__link">
    Apache - tmpreaper
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fedora-directory" title="Fedora directory" class="md-nav__link">
    Fedora directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fedora-fedora" title="Fedora - fedora" class="md-nav__link">
    Fedora - fedora
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fedora-gsearch" title="Fedora - gsearch" class="md-nav__link">
    Fedora - gsearch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fedora-tmpreaper" title="Fedora - tmpreaper" class="md-nav__link">
    Fedora - tmpreaper
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fedora-tomcat" title="Fedora - tomcat" class="md-nav__link">
    Fedora - tomcat
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mysql-directory" title="Mysql directory" class="md-nav__link">
    Mysql directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mysql-initscripts" title="Mysql - initscripts" class="md-nav__link">
    Mysql - initscripts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-directory" title="Proxy directory" class="md-nav__link">
    Proxy directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proxy-sites-enabled" title="Proxy - sites-enabled" class="md-nav__link">
    Proxy - sites-enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-sites-enabled-multi" title="Proxy - sites-enabled (multi)" class="md-nav__link">
    Proxy - sites-enabled (multi)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-ssl-certs" title="Proxy - ssl-certs" class="md-nav__link">
    Proxy - ssl-certs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-ssl-certs-multi" title="Proxy - ssl-certs (multi)" class="md-nav__link">
    Proxy - ssl-certs (multi)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-upstreamsd" title="Proxy - upstreams.d" class="md-nav__link">
    Proxy - upstreams.d
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-upstreamsd-multi" title="Proxy - upstreams.d (multi)" class="md-nav__link">
    Proxy - upstreams.d (multi)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-docker-composeyml-only-multi" title="Proxy - docker-compose.yml (only multi)" class="md-nav__link">
    Proxy - docker-compose.yml (only multi)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solr-directory" title="Solr directory" class="md-nav__link">
    Solr directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solr-solr" title="Solr - solr" class="md-nav__link">
    Solr - solr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solr-tomcat" title="Solr - tomcat" class="md-nav__link">
    Solr - tomcat
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-steps" title="Final steps" class="md-nav__link">
    Final steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clone-custom-configuration-to-host-server" title="Clone Custom Configuration to Host Server" class="md-nav__link">
    Clone Custom Configuration to Host Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spin-up-isle-containers" title="Spin up ISLE containers!" class="md-nav__link">
    Spin up ISLE containers!
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>New Site Installation Guide - w/ multiple ISLE Environments</h1>
                
                <p>This guide documents how an enduser can spin up and install <strong>multiple</strong> ISLE / Islandora sites within multiple ISLE / Islandora environments e.g. (production, staging and development) all tailored to using their own unique domains / URLs.</p>
<p>A new ISLE / Islandora environment can include the option to create an un-themed Drupal website and empty Fedora repository for endusers to develop code, perform ingests, edit metadata, update fields in SOLR indexing all essential in ultimately creating a new ISLE production site.</p>
<p>While this checklist will attempt to point out most of the usage challenges or pitfalls, ISLE assumes no responsibility or liability in this matter should an enduser have customizations beyond what this guide outlines.</p>
<h2 id="index-of-related-documents">Index of related documents</h2>
<ul>
<li><a href="../new_site_example_user_story/">New Site Example User Story</a></li>
</ul>
<hr />
<p><strong>Please note:</strong> There is a <a href="../../glossary/">Glossary</a> with relevant terms to help guide installation.</p>
<h2 id="assumptions-prerequisites">Assumptions / Prerequisites</h2>
<ul>
<li>
<p>Comfortability with ISLE. Recommend first setting up the ISLE Test Site (<code>isle.localdomain</code>) via the <a href="../../install_start_here/">Install Start Here</a> guide. If you have already done this, please proceed.</p>
</li>
<li>
<p>Host Server that conforms to the specifications outlined in the <a href="../../01_installation_host_server/host_server_system_specifications/">Host Server Specifications</a></p>
</li>
<li>
<p>This new site guide is designed for a Host server that has already followed the appropriate setup and configuration instructions in the <code>Create a new ISLE site</code> section of the <a href="../../install_start_here/">Install Start Here</a> guide.</p>
</li>
<li>
<p>Instructions below also assume a MacOS or Linux laptop or workstation to be used in conjunction with the ISLE Host Server for deploying configs, code, files etc. Windows users may have to adjust / swap out various tools as needed.</p>
</li>
<li>
<p>These directions also depend on the type of local computer used to connect via browser to Islandora.</p>
</li>
<li>
<p>Have an existing domain name that works - is set up with DNS etc...</p>
</li>
<li>
<p>Have <a href="../../glossary/#systems">SSL Certificates</a> previously created for the web domain. (<em>Please work with the appropriate internal IT resource to provision these files for your domain</em>)</p>
</li>
<li>
<p>ISLE project has been cloned to BOTH your local laptop/workstation AND the ISLE host server</p>
</li>
</ul>
<hr />
<h2 id="multiple-isle-islandora-environments">Multiple ISLE / Islandora Environments</h2>
<p>When attempting to configure multiple ISLE / Islandora environments, all sections labeled <code>(multi)</code> provide additional steps to follow and/or repeat.</p>
<p>This is primarily because only one <code>proxy</code> container is needed to manage all ISLE environments (e.g. production, staging and development) on one ISLE Host Server or VM.</p>
<p>When deploying multiple ISLE environments on one ISLE host server, a few extra steps are needed as well.</p>
<p>Once the initial ISLE environment has been setup for all following environments, you'll need to please do the following:</p>
<ul>
<li>
<p>Continue to use / copy the <code>isle-newsite-sample</code> directory for any new or additional ISLE environments as directed above.</p>
</li>
<li>
<p>Per each section with a <code>(multi)</code> indicated, edit files accordingly but be aware that you'll be moving them into the appropriate subdirectory of the first created ISLE environment's <code>proxy</code> directory.</p>
</li>
<li>
<p>No other ISLE environments are to a) use their own <code>proxy</code> directory and b) have a <code>proxy:</code> section within their separate <code>docker-compose.yml</code> files.</p>
</li>
<li>
<p>Only use one <code>proxy</code> for multi ISLE environments. This container will route connections and traffic properly, keeping environments separate and data siloed.</p>
</li>
</ul>
<p>Example:</p>
<p>Multiple ISLE environments enabled within the first ISLE config using a single <code>proxy</code>.</p>
<p>In this example the <code>dev</code> ISLE environment was created first for testing and additional environments <code>stage</code> and <code>prod</code> (production) were added but are still controlled by the <code>proxy</code> config within the first created ISLE environment <code>dev</code>. This is what the final results should look like. Please note, you could run more than one site this way and are only limited by the appropriate resources of your ISLE host server.</p>
<pre><code>├── isle-newsite-dev.yourdomain.edu          (1st ISLE environment created with proxy subdirectory and proxy: section in its docker-compose.yml)
│   └── proxy
│       └── config
│           ├── sites-enabled
│           │   ├── edu.example.digital-collections-dev.conf
│           │   ├── edu.example.digital-collections-prod.conf
│           │   └── edu.example.digital-collections-stage.conf
│           ├── ssl-certs
│           │   ├── edu.example.digital-collections-dev-interm.pem
│           │   ├── edu.example.digital-collections-dev-key.pem
│           │   ├── edu.example.digital-collections-dev.pem
│           │   ├── edu.example.digital-collections-prod-interm.pem
│           │   ├── edu.example.digital-collections-prod-key.pem
│           │   ├── edu.example.digital-collections-prod.pem
│           │   ├── edu.example.digital-collections-stage-interm.pem
│           │   ├── edu.example.digital-collections-stage-key.pem
│           │   └── edu.example.digital-collections-stage.pem
│           └── upstreams.d
│               ├── edu.example.digital-collections-dev.conf
│               ├── edu.example.digital-collections-prod.conf
│               └── edu.example.digital-collections-stage.conf
|
├── isle-newsite-prod.yourdomain.edu            (3rd ISLE environment created, no proxy subdirectory, no proxy: section in its docker-compose.yml)
|
├── isle-newsite-sample                         
|
└── isle-newsite-stage.yourdomain.edu           (2nd ISLE environment created, no proxy subdirectory, no proxy section in its docker-compose.yml)
</code></pre>

<hr />
<h2 id="overview">Overview</h2>
<ul>
<li>
<p>Setup a Private Code Repository</p>
<ul>
<li>Most of the work in this guide involves careful editing of the various configuration and settings files that customize the pieces of Islandora (database, repository, web-server, etc...).</li>
<li>Doing this work in a code repository makes it easier to correct errors and to repeat the process for additional servers without needing to replicate all the work.</li>
<li>Since the edits could include things like passwords, it's important to make this a private repository.</li>
</ul>
</li>
<li>
<p>Customizing for your Environment</p>
<ul>
<li>Many of the steps below describe adding the domain name or other specific bits of information into files or appending those bits to file names.</li>
<li>In these cases this guide will call out the customization point AND provide an example - it's important not to literally copy paste the example!</li>
</ul>
</li>
</ul>
<hr />
<h2 id="create-private-code-repository">Create Private Code Repository</h2>
<p><strong>ON your local laptop/workstation:</strong></p>
<ul>
<li>
<p>Using a git repository of your choice (GitHub, GitLab, Bitbucket, etc.) create a PRIVATE remote git repo - see the specific code repository documentation online for setup instructions.</p>
</li>
<li>
<p>Open a terminal - navigate to <code>/opt/ISLE/config</code> (<em>or where you put the ISLE directory on your local workstation.</em>)</p>
</li>
<li>
<p>Create a new directory with a name of your choice</p>
</li>
<li>
<p>Example: where "digital-collections.yourdomain.com" is your server domain name e.g.:  <code>config/digital-collections.example.edu</code></p>
</li>
<li>
<p>Please do not use this literal value.</p>
</li>
<li>
<p>Locate the directory within the <code>/opt/ISLE/config/</code> directory called <code>isle-newsite-sample</code> and copy all of its contents into your newly created directory.</p>
</li>
<li>
<p><code>cd</code> into the newly copied and renamed <code>digital-collections.example.edu</code> directory and type:
 <code>git init</code> to imitate this directory as a code repository.</p>
</li>
<li>
<p><code>git remote add NameOfYourRepository URLofYourRepository</code> to connect your local repository to the remote you set up in the above steps.</p>
<ul>
<li>[<strong>NOTE</strong> replace "NameOfYourRepository" and "URLofYourRepository" with the name of your git repository and its URL]</li>
</ul>
</li>
<li>
<p>You are now ready to perform the customization edits in this directory (you can use a text editor of choice now don't have to stay in terminal - just locate the folder in the finder and open file in text editor)</p>
</li>
</ul>
<h2 id="edits">Edits</h2>
<h3 id="docker-compose-file">Docker compose file:</h3>
<ul>
<li>
<p>Edit the file: <strong>docker-compose.yml</strong> accordingly:</p>
<ul>
<li>
<p>Change container names based on the environment (prod, stage, dev, etc)</p>
</li>
<li>
<p>For example if you are building a dev server instance:</p>
<p><code>container_name: isle-solr-newsite</code></p>
<p>changes to:</p>
<p><code>container_name: isle-solr-dev</code></p>
<p>and so on...</p>
</li>
</ul>
</li>
</ul>
<p><strong>Please note:</strong> Much of the file is already with comments guiding the enduser to key areas or files to edit or modify accordingly.</p>
<hr />
<h2 id="config-directories">Config directories</h2>
<p>Now proceed to make edits to files within the config subdirectories:</p>
<p>a. to reflect <strong>environment</strong> (prod, stage, dev, etc...)</p>
<p>b. to involve your <strong>domain name</strong> (digital-collections.example.edu)</p>
<p>There are five subdirectories which have the appropriate settings for each respective container and service:</p>
<ul>
<li>apache</li>
<li>fedora</li>
<li>mysql</li>
<li>proxy</li>
<li>solr</li>
</ul>
<hr />
<h3 id="apache-directory">Apache directory</h3>
<p>The <code>apache</code> subdirectory contains all specific configurations and overrides necessary for the ISLE apache image and resulting container to function properly with your changes. This is the webserver that serves the Islandora / Drupal website.</p>
<ul>
<li>
<p>(<em>Optional</em>) Edit the php.ini file to change various appropriate settings if needed otherwise leave alone.</p>
<ul>
<li>Example - Line 820: change the <code>upload_max_filesize = 2000M</code> to a higher setting if desired. Currently at a 2GB upload limit.</li>
</ul>
</li>
<li>
<p>Edit the file: <code>settings.php</code></p>
<ul>
<li>
<p>Lines 251-253: add your database name, database user, and database password    </p>
</li>
<li>
<p>Line 288: to include a 45+ alpha-numeric characters drupal hash between the quotes after this text: <code>$drupal_hash_salt = '';</code></p>
<ul>
<li>You'll need to create this value, recommend using a password generator tool. Ensure only alpha-numeric characters are used, no symbols etc.</li>
</ul>
</li>
<li>
<p>Line 311: Review and ensure <code># $base_url =</code> is still commented out</p>
</li>
</ul>
</li>
<li>
<p>Edit the file: <code>install_new_site.sh</code>  line 29:</p>
<ul>
<li>
<p><code>/usr/local/bin/drush site-install -y --account-name=newsite_admin --account-pass=newsite_adminpw --account-mail=admin@newsite.com --site-name="ISLE New Site Sample"</code></p>
</li>
<li>
<p>Change the following values in that line above to the appropriate names and passwords for your site.</p>
<ul>
<li>--account-name= Drupal admin account</li>
<li>--account-pass= Drupal admin account password</li>
<li>--account-mail= Email address that can be associated with Drupal admin account</li>
<li>--site-name= Name of your new ISLE website</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<h4 id="apache-sites-enabled">Apache - sites-enabled</h4>
<ul>
<li>
<p>Within the <code>sites-enabled</code> directory, rename the files <code>newsite-sample-ssl.conf</code> and <code>newsite-sample.conf</code> to your domain names - example:</p>
<ul>
<li>
<p><code>digital-collections.example.edu_ssl.conf</code></p>
</li>
<li>
<p><code>digital-collections.example.edu.conf</code></p>
</li>
</ul>
</li>
<li>
<p>Edit the previously named <code>newsite-sample.conf</code> file and change lines 3 and 4 to point to the location of your apache logs on the container - example:</p>
<ul>
<li>
<p><code>ErrorLog /var/log/apache2/digital-collections.example.edu.ssl.error.log</code></p>
</li>
<li>
<p><code>CustomLog /var/log/apache2/digital-collections.example.edu.ssl.access.log combined</code></p>
</li>
</ul>
</li>
<li>
<p>Edit the previously named <code>newsite-sample-ssl.conf</code> file and change lines 4 and 5 to point to the location of your apache logs on the container - example:</p>
<ul>
<li>
<p><code>ErrorLog /var/log/apache2/digital-collections.example.edu.ssl.error.log</code></p>
</li>
<li>
<p><code>CustomLog /var/log/apache2/digital-collections.example.edu.ssl.access.log combined</code></p>
</li>
</ul>
</li>
<li>
<p>Edit the previously named <code>newsite-sample-ssl.conf</code> file and change lines 12 and 13 to point to the location of your certs on the container - example:</p>
</li>
</ul>
<pre><code>
    SSLCertificateFile  /certs/newsite-sample.pem
    SSLCertificateChainFile /certs/newsite-sample-interm.pem
    SSLCertificateKeyFile /certs/newsite-sample-key.pem

</code></pre>

<hr />
<h4 id="apache-ssl-certs">Apache - ssl-certs</h4>
<p>If need be, please refer to the <strong>SSL certificate</strong> section of the <a href="../../glossary/">Glossary</a> for relevant terms to help guide installation.</p>
<ul>
<li>
<p>Copy your SSL certificates for Apache into the <code>apache/ssl-certs</code> subdirectory. They will and should have different names than the examples provided below dependent on the ISLE environment you are setting up e.g. (<em>production, staging or development</em>).</p>
<ul>
<li>
<p>There can be up to 2 - 3 files involved in this process.</p>
<ul>
<li>
<p>1 x SSL Certificate Key File e.g. <code>newsite-sample-key.pem</code></p>
<ul>
<li>This file is required.</li>
<li>Please also note that the file extensions can also be: <code>.key</code> or <code>.pem</code></li>
</ul>
</li>
<li>
<p>1 x SSL Certificate File e.g. <code>newsite-sample.pem</code></p>
<ul>
<li>This file is required.</li>
<li>Please also note that the file extensions can also be: <code>.cer</code>, <code>.crt</code> or <code>.pem</code></li>
</ul>
</li>
<li>
<p>1 x SSL Certificate Chain File e.g. <code>newsite-sample-interm.pem</code></p>
<ul>
<li>This file may be <strong>optional</strong> in some setups but is generally recommended for use by the <code>apache</code> container when available.</li>
<li>It will not be used by the <code>proxy</code> container.</li>
<li>Please also note that the file extensions can also be: <code>.cer</code>, <code>.crt</code> or <code>.pem</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="apache-ssl-certs-multi">Apache - ssl-certs (multi)</h4>
<ul>
<li>When creating multiple environments for ISLE, please change all of the file and key names accordingly to reflect the environment e.g. adding (<code>-prod, -stage, -dev</code> to file names). Later on, this process will assist in organizing proper filing of files for the <code>proxy</code> container and stop any situation where a file gets overwritten or improperly referenced by the wrong environment.</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code>* 1 x SSL Certificate Key File e.g. `newsite-dev-key.pem`
* 1 x SSL Certificate File e.g. `newsite-dev.pem`
* 1 x SSL Certificate Chain File e.g. `newsite-dev-interm.pem`
</code></pre>
<hr />
<h4 id="apache-tmpreaper">Apache - tmpreaper</h4>
<ul>
<li>
<p>(<em>Optional</em>) Edit the cron file within the <code>apache/tmpreaper</code> subdirectory to change various appropriate settings if needed otherwise leave alone if you are not familiar with how cron jobs work.</p>
</li>
<li>
<p>Currently this cronjob is set to run every 12 hours and using the tmpreaper utility to clean out and delete the contents of the /tmp folder if they are older than 4 days.</p>
</li>
</ul>
<hr />
<h3 id="fedora-directory">Fedora directory</h3>
<p>The <code>fedora</code> subdirectory contains all specific configurations and overrides necessary for the ISLE fedora image and resulting container to function properly with your changes. This is the Fedora repository that will contain all objects, metadata etc.</p>
<h4 id="fedora-fedora">Fedora - fedora</h4>
<ul>
<li>
<p>Within the <code>fedora/fedora</code> subdirectory, <strong>add new passwords</strong> in the following files:</p>
<ul>
<li>Lines 3, 8, 14: <code>fedora-users.xml</code>  (change all applicable passwords for fedora users)</li>
<li>Line 598: <code>fedora.fcfg</code>  (change the password to the <code>fedora_admin</code> <strong>database user password</strong> only)</li>
<li>Line 15: <code>filter-drupal.xml</code>  (change the associated Drupal site database name , user and password, do not use settings for the <code>fedora3</code> database.)</li>
</ul>
</li>
<li>
<p>(<em>Optional</em>) Edit either of the log4j.properties or logback.xml files to change logging levels for the <code>fedora</code> container if needed, otherwise leave alone.</p>
<ul>
<li>
<p>Please note: If making changes, you'll need to then edit the <code>docker-compose.yml</code> file accordingly in the <code>fedora</code> <code>volumes</code> section</p>
</li>
<li>
<p>Example add a line to make changes for the Fedora application logging.</p>
</li>
<li>
<p><code>- ./fedora/fedora/logback.xml :/usr/local/fedora/server/config/logback.xml</code></p>
</li>
<li>
<p>Example add a line to make changes for the Djatoka application logging.</p>
</li>
<li><code>- ./fedora/fedora/logback.xml :/usr/local/tomcat/webapps/adore-djatoka/WEB-INF/classes/log4j.properties</code>     </li>
</ul>
</li>
<li>
<p>(<em>Optional</em>) Edit the contents of the repository-policies subdirectory as necessary <strong>IF YOU NEED TO</strong>, otherwise leave alone.</p>
</li>
</ul>
<hr />
<h4 id="fedora-gsearch">Fedora - gsearch</h4>
<ul>
<li>
<p>Within the <code>fedora/gsearch</code> subdirectory, edit the file: <code>fedoragsearch.properties</code> at line 7 and add a space after the equal sign and then add the new <em>gsearch fgsAdmin user password</em>.</p>
<ul>
<li><code>-  fedoragsearch.soapPass                = new_fgsAdmin_password_here</code></li>
</ul>
</li>
<li>
<p>Edit the file: <code>fgsconfig-basic-configForIslandora.properties</code></p>
<ul>
<li>
<p>Line 26: add the new <em>gsearch fgsAdmin user password</em>.</p>
<ul>
<li><code>gsearchPass=new_fgsAdmin_password_here</code></li>
</ul>
</li>
<li>
<p>Line 67: Add the new fedora <em>fedora admin password</em>.</p>
<ul>
<li><code>fedoraPass=new_fedoraAdmin_password_here</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Edit the file: <code>fedora/gsearch/fgsconfigObjects.properties</code> at line 15 and add a space after the equal sign and then add the new <em>fedora admin password</em>.</p>
<ul>
<li><code>fgsconfigObjects.fedoraPass            = new_fedoraAdmin_password_here</code></li>
</ul>
</li>
<li>
<p>Edit the file: <code>fedora/gsearch/repository.properties</code> at line 7 and add a space after the equal sign and then add the new <em>fedora admin password</em>.</p>
<ul>
<li><code>fgsrepository.fedoraPass        = new_fedoraAdmin_password_here</code></li>
</ul>
</li>
</ul>
<hr />
<h4 id="fedora-tmpreaper">Fedora - tmpreaper</h4>
<ul>
<li>
<p>(<em>Optional</em>) Edit the cron file within <code>fedora/tmpreaper</code> to change various appropriate settings if needed otherwise leave alone if you are not familiar with how cron jobs work.</p>
</li>
<li>
<p>Currently this cronjob is set to run every 12 hours and using the tmpreaper utility to clean out and delete the contents of the /tmp folder if they are older than 4 days.</p>
</li>
</ul>
<hr />
<h4 id="fedora-tomcat">Fedora - tomcat</h4>
<ul>
<li>
<p>Within the <strong>tomcat</strong> subdirectory:</p>
<ul>
<li>Strongly recommend adding tomcat user passwords in file: <code>fedora/tomcat/tomcat-users.xml</code></li>
</ul>
</li>
</ul>
<p>Example: ONLY ADD TOMCAT USERNAME/PASSWORD - can look like this but please use a stronger password with more than 10 alpha-numeric characters. Also note, they should NOT be the same password.:</p>
<pre><code>          &lt;!-- user manager can access only manager section --&gt;
             &lt;user username=“manager” password=“tomcat_manager_password&quot; roles=“manager-gui” /&gt;  &lt;!--enduser please add passwords / users and remove this comment --&gt;

          &lt;!-- user admin can access manager and admin section both --&gt;
             &lt;user username=“admin” password=“tomcat_admin_password” roles=“manager-gui,admin-gui” /&gt; &lt;!--enduser please add passwords / users and remove this comment --&gt;

          &lt;/tomcat-users&gt;

</code></pre>

<hr />
<h3 id="mysql-directory">Mysql directory</h3>
<p>The <code>mysql</code> subdirectory contains all specific configurations and overrides necessary for the ISLE mysql image and resulting container to function properly with your changes. This is the Mysql database server that will contain two databases, one for the Islandora / Drupal website and the other for the Fedora repository.</p>
<ul>
<li>(<em>Optional</em>) Edit the Mysql configuration file <code>my.cnf</code> as needed otherwise leave alone.</li>
</ul>
<h4 id="mysql-initscripts">Mysql - initscripts</h4>
<p>This subdirectory houses SQL scripts necessary for a one time creation of your associated new site and <code>fedora3</code> database.</p>
<p>You'll want to rename <code>newsite_sample_db.sql</code> to the database or domain name of your choice.</p>
<ul>
<li>
<p>Edit the contents of <code>newsite_sample_db.sql</code> to create the new drupal site database and user.</p>
<ul>
<li>
<p>Line 1: Change the database name from <code>newsite_sample_db</code> to the database name of your choice.</p>
</li>
<li>
<p>Line 2: Change the database user name from <code>newsite_sample_db_user</code> to the database user name of your choice.</p>
</li>
<li>
<p>Line 3: At almost the end of the line, change the value of <code>newsite_sample_db.*</code> to the to the database name of your choice ensuring the <code>.*</code> remain without a space.</p>
</li>
<li>
<p>Line 3: At the end of the line, change the value of <code>newsite_sample_db_user'</code> to the to the database user name of your choice ensuring the values remain with in the <code>''</code>quotes without spaces. Do not alter the remaining code (<code>@'%';'</code>) beyond that point.</p>
</li>
</ul>
</li>
<li>
<p>Edit the contents of <code>fedora3</code> to change the <code>fedora_admin</code> user password only.</p>
<ul>
<li>
<p>Line 2: Change the <code>fedora_admin</code> user password from <code>newsite_sample_fedora_admin_pw</code> to the password of your choice.</p>
</li>
<li>
<p>It is not recommended to change anything else.</p>
</li>
</ul>
</li>
</ul>
<hr />
<h3 id="proxy-directory">Proxy directory</h3>
<p>If need be, please refer to the <strong>Systems</strong> section of the <a href="../../glossary/">Glossary</a> for relevant terms to help guide installation.</p>
<p>The <code>proxy</code> subdirectory contains all specific configurations and overrides necessary for the ISLE proxy image and resulting container to function properly with your changes. This is the Nginx reverse proxy server that properly routes all internal and external communication between the other four containers and the ISLE Host network.</p>
<h4 id="proxy-sites-enabled">Proxy - sites-enabled</h4>
<ul>
<li>
<p>In the <code>config/sites-enabled</code> subdirectory, rename the <code>com.sample-newsite.conf</code> file to <code>com.yourdomain.conf</code> (where "yourdomain" is the domain name of your server but the suffix .com typically last is now first.)</p>
<ul>
<li>Example: <code>edu.example.digital-collections.conf</code></li>
</ul>
</li>
<li>
<p>Now edit the file...</p>
<ul>
<li>
<p>Line 6: change <code>newsite-sample.com</code> to the domain name of your choice</p>
<ul>
<li>Ensure a space between <code>server_name</code> and the domain name and a <code>;</code> after the domain name still remain.</li>
</ul>
</li>
<li>
<p>Line 15: change <code>newsite-sample.com</code> to the domain name of your choice</p>
<ul>
<li>Ensure a space between <code>server_name</code> and the domain name and a <code>;</code> after the domain name still remain.</li>
</ul>
</li>
<li>
<p>Lines 18 &amp; 19: Change to the name of your ssl certs (should be same names as in previously made <code>apache</code> edits above)</p>
</li>
</ul>
</li>
</ul>
<h4 id="proxy-sites-enabled-multi">Proxy - sites-enabled (multi)</h4>
<p><strong>Please note:</strong> If you only intend to deploy one ISLE environment ever e.g. a Production environment, you do not necessarily have to edit all of the following. You can move onto the next section.</p>
<p>Otherwise, if you are planning on running multiple ISLE environments e.g. production, development etc together on one ISLE host server, please continue to edit your .conf file accordingly.</p>
<p><strong>Please also note:</strong> The order of environment creation is not necessarily important e.g you don't need to setup a development environment prior to a production one. However in general, best practice is to test prior to opening up a server to the public.</p>
<ul>
<li>
<p>Line 54: Add the appropriate environment suffix e.g. <code>-prod, -stage, -dev etc.</code></p>
<ul>
<li>Example: Change <code>proxy_pass https://apache-internal;</code> to <code>proxy_pass https://apache-internal-dev;</code></li>
</ul>
</li>
<li>
<p>Line 66: Add the appropriate environment suffix e.g. <code>-prod, -stage, -dev etc.</code></p>
<ul>
<li>Example: Change <code>proxy_pass http://fedora-internal/adore-djatoka;</code> to <code>proxy_pass http://fedora-internal-dev/adore-djatoka;</code></li>
</ul>
</li>
<li>
<p>Line 74: Add the appropriate environment suffix e.g. <code>-prod, -stage, -dev etc.</code></p>
<ul>
<li>Example: Change <code>proxy_pass http://fedora-internal/fedora/get;</code> to `proxy_pass http://fedora-internal-dev/fedora/get;``</li>
</ul>
</li>
<li>
<p>Line 80: Add the appropriate environment suffix e.g. <code>-prod, -stage, -dev etc.</code></p>
<ul>
<li>Example: Change <code>proxy_pass http://fedora-internal/fedora/services;</code> to <code>proxy_pass http://fedora-internal-dev/fedora/services;</code></li>
</ul>
</li>
<li>
<p>Line 86: Add the appropriate environment suffix e.g. <code>-prod, -stage, -dev etc.</code></p>
<ul>
<li>Example: Change <code>proxy_pass http://fedora-internal/fedora/describe;</code> to <code>proxy_pass http://fedora-internal-dev/fedora/describe;</code></li>
</ul>
</li>
<li>
<p>Line 92: Add the appropriate environment suffix e.g. <code>-prod, -stage, -dev etc.</code></p>
<ul>
<li>Example: Change <code>proxy_pass http://fedora-internal/fedora/risearch;</code> to `proxy_pass http://fedora-internal-dev/fedora/risearch;``</li>
</ul>
</li>
</ul>
<p>Upon completing all edits, move the resulting file to the first setup ISLE environment <code>proxy/config/sites-enabled</code> directory.</p>
<p>Example directory contents with multiple ISLE environment configurations:</p>
<ul>
<li>
<p><code>edu.example.digital-collections-dev.conf</code></p>
</li>
<li>
<p><code>edu.example.digital-collections-stage.conf</code></p>
</li>
<li>
<p><code>edu.example.digital-collections-prod.conf</code></p>
</li>
</ul>
<hr />
<h4 id="proxy-ssl-certs">Proxy - ssl-certs</h4>
<p>Copy your SSL certs into the ssl-certs subdirectory.</p>
<p><em>DO NOT OVERWRITE OR DELETE the create_dhparam_pem file within this directory.</em></p>
<p>If need be, please refer to the <strong>SSL certificate</strong> section of the <a href="../../glossary/">Glossary</a> for relevant terms to help guide installation.</p>
<p>There are also additional links for the enduser to learn how to combine the SSL Certificate File with any available SSL Certificate Chain File for the <code>proxy</code> process to work properly.</p>
<ul>
<li>
<p>Copy your SSL certificates for the ISLE Proxy into <code>proxy/ssl-certs</code>. They will and should have different names than the examples provided below.</p>
</li>
<li>
<p>There can only be 2 files involved in this process.</p>
<ul>
<li>
<p>1 x SSL Certificate Key File e.g. <code>newsite-sample-key.pem</code></p>
<ul>
<li>This file is required.</li>
<li>Please also note that the file extensions can also be: <code>.key</code> or <code>.pem</code></li>
</ul>
</li>
<li>
<p>1 x SSL Certificate File e.g. <code>newsite-sample.pem</code></p>
<ul>
<li>This file is required.</li>
<li>Please also note that the file extensions can also be: <code>.cer</code>, <code>.crt</code> or <code>.pem</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Open a terminal, navigate to the is subdirectory, and run the <code>create_dhparam_pem.sh</code> script in <code>~/ISLE/config/isle-newsite-sample/proxy/ssl-certs/</code> subdirectory to create the <code>dhparam.pem</code> file (<em>if not already.</em>) This file is critical to the SSL encryption process and for communication between the <code>proxy</code> and <code>apache</code> containers.</p>
<ul>
<li>
<p>To run this script from within this subdirectory:  <code>./create_dhparam_pem.sh</code>.</p>
</li>
<li>
<p>This will take 10 -20 mins depending on the speed of your local laptop or workstation.</p>
</li>
</ul>
</li>
</ul>
<h4 id="proxy-ssl-certs-multi">Proxy - ssl-certs (multi)</h4>
<p>Copy all of your SSL certificates and keys for all environments into the ssl-certs subdirectory.</p>
<p>The proxy directory for the first setup ISLE environment is to be used for all following environments due to the current architecture of ISLE.</p>
<p>As per the instructions outlined previously in the section <code>Apache - ssl-certs (multi)</code>, when creating multiple environments for ISLE, please change all of the file and key names accordingly to reflect the environment e.g. adding (<code>-prod, -stage, -dev</code> to file names). Later on, this process will assist in organizing proper filing of files for the <code>proxy</code> container and stop any situation where a file gets overwritten or improperly referenced by the wrong environment.</p>
<p><strong>Example:</strong></p>
<ul>
<li>1 x SSL Certificate Key File e.g. <code>newsite-dev-key.pem</code></li>
<li>
<p>1 x SSL Certificate File e.g. <code>newsite-dev.pem</code></p>
</li>
<li>
<p>1 x SSL Certificate Key File e.g. <code>newsite-stage-key.pem</code></p>
</li>
<li>
<p>1 x SSL Certificate File e.g. <code>newsite-stage.pem</code></p>
</li>
<li>
<p>1 x SSL Certificate Key File e.g. <code>newsite-prod-key.pem</code></p>
</li>
<li>1 x SSL Certificate File e.g. <code>newsite-prod.pem</code></li>
</ul>
<p>For all following ISLE environments, please delete the proxy directory found within each environments config parent directory.</p>
<p><strong>Example:</strong></p>
<ul>
<li>
<p>1st ISLE environment setup: Keep the proxy directory e.g. Keep this <code>~/opt/ISLE/config/isle-newsite-dev/proxy</code></p>
</li>
<li>
<p>2nd ISLE environment setup: Delete the proxy directory e.g. remove this <code>~/opt/ISLE/config/isle-newsite-stage/proxy</code></p>
</li>
<li>
<p>3rd ISLE environment setup: Delete the proxy directorye.g. <code>remove this~/opt/ISLE/config/isle-newsite-prod/proxy</code></p>
</li>
</ul>
<p>and so on...</p>
<hr />
<h4 id="proxy-upstreamsd">Proxy - upstreams.d</h4>
<p>Single environment steps only below:</p>
<ul>
<li>
<p>Copy and rename: <code>sample-upstreams.conf.disabled</code> to the appropriate domain name of your choice e.g. <code>yourdomain-upstreams-dev.conf</code> while also removing the <code>.disabled</code> suffix.</p>
</li>
<li>
<p><strong>Example A:</strong> Lines 10 and 14 look like this for a single environment (no additional environments to be setup). See <code>proxy/config/sites-enable/com.sample-newsite.conf.disabled</code>.</p>
</li>
</ul>
<p><strong>Please note:</strong> If only ever deploying a single ISLE environment, you could chose not to add any suffixes and ISLE should function properly. This is entirely dependent on your organizational needs.</p>
<p>Example: Single Environment (defaults, no edits made)</p>
<pre><code>
      upstream fedora-internal {
        server fedora:8080 fail_timeout=0;
      }

      upstream fedora-internal {
        server apache:443 fail_timeout=0;
      }

</code></pre>

<h4 id="proxy-upstreamsd-multi">Proxy - upstreams.d (multi)</h4>
<ul>
<li>
<p>Copy and rename: <code>sample-upstreams.conf.disabled</code> to the appropriate domain name and environment type (<code>dev, prod, stage, etc...</code>) of your choice e.g. <code>yourdomain-upstreams-dev.conf</code> while also removing the <code>.disabled</code> suffix.</p>
</li>
<li>
<p>Within the file, append the environment name after all instances of "internal" proceeded by a hyphen "-environment_type" like the example below:</p>
</li>
<li>
<p><strong>Example A:</strong> Lines 10 and 14 look like this for a development environment that will be run alongside more ISLE environments to follow. See <code>proxy/config/sites-enable/com.sample-newsite.conf.disabled</code>.</p>
</li>
</ul>
<p>Example: Multi Environment (dev as example)</p>
<pre><code>
      upstream fedora-internal-dev {
        server fedora:8080 fail_timeout=0;
      }

      upstream fedora-internal-dev {
        server apache:443 fail_timeout=0;
      }

</code></pre>

<p><strong>Please note:</strong> You do not add additional environment code here e.g. <code>-prod or -stage</code>. Each environment has its own .conf file to manage this seperately.</p>
<p>Upon completing all edits, move the resulting file to the first setup ISLE environment <code>proxy/config/upstreams.d</code> directory.</p>
<p>Example <code>proxy/config/sites-enabled/</code> directory contents running multi-environments.</p>
<ul>
<li>
<p><code>edu.example.digital-collections-dev.conf</code></p>
</li>
<li>
<p><code>edu.example.digital-collections-prod.conf</code></p>
</li>
<li>
<p><code>edu.example.digital-collections-stage.conf</code></p>
</li>
</ul>
<h4 id="proxy-docker-composeyml-only-multi">Proxy - docker-compose.yml (only multi)</h4>
<ul>
<li>
<p>Within each new <code>docker-compose.yml</code> file created for each new environment:</p>
</li>
<li>
<p>Delete the <code>proxy</code> section entirely</p>
<ul>
<li>delete Lines 94 <code>proxy:</code> to Line 111.</li>
</ul>
</li>
<li>
<p>Uncomment Lines 118 &amp; 119</p>
</li>
</ul>
<p>Example:</p>
<pre><code>
# Defined networks
networks:
  isle-internal:
  isle-external:
#    external: true            # edit if running a new multi environment
#    name: isle_isle-internal  # edit if running a new multi environment

</code></pre>

<p>should now become</p>
<pre><code># Defined networks
networks:
  isle-internal:
  isle-external:
    external: true          
    name: isle_isle-internal

</code></pre>

<ul>
<li>
<p>(<em>optional</em>) Once you have the 1st ISLE environment running, you can double check this value for later ISLE environments by entering:</p>
<ul>
<li><code>docker network ls</code> to review current running network types.</li>
</ul>
</li>
</ul>
<p>Example:</p>
<pre><code>NETWORK ID          NAME                                        DRIVER              SCOPE
7361197ad494        bridge                                      bridge              local
7d37894dd4ca        host                                        host                local
d4994fca8ea7        isle_isle-external                          bridge              local
22518b818c29        isle_isle-internal                          bridge              local
</code></pre>

<hr />
<h3 id="solr-directory">Solr directory</h3>
<p>The <code>solr</code> subdirectory contains all specific configurations and overrides necessary for the ISLE solr image and resulting container to function properly with your changes. This is the SOLR search server that properly indexes all objects and metadata to provide speedy in-depth search functionality for the Islandora / Drupal site of the objects and collections contained within the Fedora repository.</p>
<p>If need be, please refer to the <strong>Solr</strong> section of the <a href="../../glossary/">Glossary</a> for relevant terms to help guide installation.</p>
<h4 id="solr-solr">Solr - solr</h4>
<ul>
<li>
<p>(<em>Optional</em>) Within the <strong>solr</strong> subdirectory:</p>
<ul>
<li>
<p>Make the appropriate customizations or changes to the following files as you see fit otherwise you can leave these files alone and SOLR will work out of the box.</p>
<ul>
<li>
<p><code>schema.xml</code></p>
</li>
<li>
<p><code>solr.xml</code></p>
</li>
<li>
<p><code>solrconfig.xml</code></p>
</li>
<li>
<p><code>stopwords.txt</code></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="solr-tomcat">Solr - tomcat</h4>
<ul>
<li>
<p>Within the <strong>tomcat</strong> subdirectory:</p>
<ul>
<li>Strongly recommend adding tomcat user passwords in file: <code>solr/tomcat/tomcat-users.xml</code> on lines 45 &amp; 48.</li>
</ul>
</li>
</ul>
<p>Example: ONLY ADD TOMCAT USERNAME/PASSWORD - can look like this but please use a stronger password with more than 10 alpha-numeric characters. Also note, they should NOT be the same password.:</p>
<pre><code>          &lt;!-- user manager can access only manager section --&gt;
             &lt;user username=“manager” password=“tomcat_manager_password&quot; roles=“manager-gui” /&gt;  &lt;!--enduser please add passwords / users and remove this comment --&gt;

          &lt;!-- user admin can access manager and admin section both --&gt;
             &lt;user username=“admin” password=“tomcat_admin_password” roles=“manager-gui,admin-gui” /&gt; &lt;!--enduser please add passwords / users and remove this comment --&gt;

          &lt;/tomcat-users&gt;

</code></pre>

<hr />
<h2 id="final-steps">Final steps</h2>
<p>If need be, please refer to the <strong>Git</strong> section of the <a href="../../glossary/">Glossary</a> for relevant terms to help guide installation.</p>
<ul>
<li>
<p>Now that all the changes are made (be sure to save), ISLE should be ready to test. First you'll need to push these changes to your private code repository.</p>
<ul>
<li>
<p>Open a terminal - <code>cd</code> to the config directory you've been making the changes in...</p>
</li>
<li>
<p><code>git status</code>  this will show you all the files that have been modified and ready to be added to your private repo along with handy paths for the next steps.</p>
</li>
<li>
<p><code>git add /pathtoyourmodifiedfile</code> (replace "pathtoyourmodifiedfile" with the path to your config directory)</p>
</li>
<li>
<p>run these:</p>
</li>
</ul>
<p><code>git add apache</code>
<code>git add fedora</code>
<code>git add mysql</code>
<code>git add proxy</code>
<code>git add solr</code>
<code>git add docker-compose.yml</code>
<code>git add newsite-sample-cheatsheet.md</code></p>
<ul>
<li>
<p>Enter <code>git status</code> again - everything should be in green now as all modified files have been added - if anything's still red use git add and the path to add it</p>
</li>
<li>
<p>then run <code>git commit -m "initial config commit"</code> inside the double quotes is the commit message you can say whatever you want in this message - so for example if this is the config for your dev instance you could say that...</p>
</li>
<li>
<p>Enter <code>git push origin master</code></p>
</li>
<li>
<p>This will push all your changes to the repo.</p>
</li>
<li>
<p>Further changes should be made on git branches for different servers or environments e.g. <code>prod, stage, dev</code> or to master branch for this same server.</p>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="clone-custom-configuration-to-host-server">Clone Custom Configuration to Host Server</h2>
<p><strong>Please note:</strong> If running a (multi) ISLE environment, you will make separate git config directories to this effect and repeat these steps accordingly.</p>
<ul>
<li>
<p>Open a terminal - ssh into your host server using the <code>islandora</code> user</p>
</li>
<li>
<p><code>cd</code> to <code>/opt/ISLE/config/</code></p>
</li>
<li>
<p>Because your customizations are in a <strong>private</strong> repository, you'll need to add this islandora user's <code>id_rsa.pub</code> key to the git repository settings via it's settings profile within the appropriate website.</p>
</li>
<li>
<p>This key is found in <code>/home/islandora/.ssh/id_rsa.pub</code></p>
</li>
<li>
<p>One can simply run <code>cat /home/islandora/.ssh/id_rsa.pub</code> and copy the output (ensure no whitespaces or extra returns)</p>
</li>
<li>
<p>Go to the repository web site with a browser and locate your private repository.</p>
<ul>
<li>
<p>Locate the ssh key entry location (in Bitbucket this is in Settings / Access Keys /</p>
</li>
<li>
<p><strong>Add</strong> an ssh key w/ the label <strong>isle host server islandora deploy user</strong> paste in the key text and click <strong>Add Key</strong></p>
</li>
</ul>
</li>
<li>
<p>Back at your terminal command line, run <code>git clone URLpathtoyourremoteprivaterepo.git .</code> (replacing "URLpathtoyourremoteprivaterepo" with the URL to the repository provided by the website)</p>
</li>
<li>
<p><code>cd</code> into the newly cloned directory</p>
</li>
</ul>
<h2 id="spin-up-isle-containers">Spin up ISLE containers!</h2>
<ul>
<li>
<p>run <code>docker-compose up -d</code></p>
</li>
<li>
<p>run <code>docker exec -it yourApacheContainerNameHere bash</code></p>
<ul>
<li>Using the name from the <code>docker-composer.yml</code> file here (<em>typically: isle-apache-prod, or -stage, etc...</em>)</li>
</ul>
</li>
<li>
<p><code>cd /tmp/isle_drupal_build_tools</code></p>
</li>
<li>
<p>Run: <code>./install_new_site.sh</code></p>
</li>
<li>
<p>Give this process 15 - 25 minutes (<em>depending on the speed of the ISLE Host server internet connection</em>)</p>
</li>
<li>
<p>Check the newly created and running new site by opening a browser and navigating to your site domain e.g. <code>https://digital-collections.example.edu</code>, you should now see an un-themed Drupal site.</p>
</li>
</ul>
<hr />
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../new_site_installation_guide_single/" title="New Site Installation Guide - w/ Single ISLE Environment" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                New Site Installation Guide - w/ Single ISLE Environment
              </span>
            </div>
          </a>
        
        
          <a href="../../04_installation_migration/migration_example_user_story/" title="Migration Example User Story" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Migration Example User Story
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>